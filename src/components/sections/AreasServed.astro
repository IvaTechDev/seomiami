---
/**
 * Areas Served Section Component
 * Displays Miami coverage with interactive map
 */

import Section from '../ui/Section.astro';
import Container from '../ui/Container.astro';
import Heading from '../ui/Heading.astro';
import Badge from '../ui/Badge.astro';
import { MapPin, ArrowRight, Users, Globe, TrendingUp } from 'lucide-react';
import MiamiMap from '../interactive/MiamiMap.tsx';
import { miamiNeighborhoods } from '../../data/miami-neighborhoods';

// Group neighborhoods by region for better organization
const regions = [
  { name: 'Downtown & Brickell', neighborhoods: miamiNeighborhoods.filter(n => ['Downtown Miami', 'Brickell', 'Edgewater'].includes(n.name)) },
  { name: 'Beach & Coastal', neighborhoods: miamiNeighborhoods.filter(n => ['Miami Beach', 'South Beach', 'Bal Harbour', 'Sunny Isles', 'Key Biscayne'].includes(n.name)) },
  { name: 'Wynwood & Design District', neighborhoods: miamiNeighborhoods.filter(n => ['Wynwood', 'Design District', 'Midtown'].includes(n.name)) },
  { name: 'Coral Gables & Grove', neighborhoods: miamiNeighborhoods.filter(n => ['Coral Gables', 'Coconut Grove'].includes(n.name)) },
  { name: 'West & Central', neighborhoods: miamiNeighborhoods.filter(n => ['Doral', 'Hialeah', 'Little Havana', 'Kendall'].includes(n.name)) },
  { name: 'North Miami', neighborhoods: miamiNeighborhoods.filter(n => ['Aventura', 'North Miami', 'North Miami Beach'].includes(n.name)) },
];
---

<Section id="areas-served">
  <Container>
    <div class="text-center mb-16">
      <Heading level="h2" as="h2" className="mb-4">
        Serving All of <span class="text-miami-cyan">Miami-Dade County</span>
      </Heading>
      <p class="text-xl text-slate-300 max-w-3xl mx-auto">
        Local SEO experts who know your neighborhood
      </p>
    </div>

    {/* Stats */}
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-12">
      <div class="text-center p-6 rounded-xl bg-gradient-to-br from-miami-cyan/10 to-miami-purple/10 border border-miami-cyan/20">
        <div class="text-4xl font-display font-bold text-miami-cyan mb-2">
          50+
        </div>
        <p class="text-sm text-slate-300">Neighborhoods Served</p>
      </div>
      <div class="text-center p-6 rounded-xl bg-gradient-to-br from-miami-purple/10 to-miami-pink/10 border border-miami-purple/20">
        <div class="text-4xl font-display font-bold text-miami-purple mb-2">
          15
        </div>
        <p class="text-sm text-slate-300">Years Local Experience</p>
      </div>
      <div class="text-center p-6 rounded-xl bg-gradient-to-br from-miami-pink/10 to-miami-cyan/10 border border-miami-pink/20">
        <div class="text-4xl font-display font-bold text-miami-pink mb-2">
          500+
        </div>
        <p class="text-sm text-slate-300">Local Businesses</p>
      </div>
      <div class="text-center p-6 rounded-xl bg-gradient-to-br from-miami-cyan/10 to-miami-purple/10 border border-miami-cyan/20">
        <div class="text-4xl font-display font-bold text-miami-cyan mb-2">
          #1
        </div>
        <p class="text-sm text-slate-300">Miami SEO Agency</p>
      </div>
    </div>

    {/* Main Content - Split Layout */}
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
      {/* Interactive Map */}
      <div class="order-2 lg:order-1">
        <div class="sticky top-24">
          <div class="rounded-2xl overflow-hidden bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-sm border border-slate-700/50 p-6">
            <!-- <MiamiMap client:visible neighborhoods={miamiNeighborhoods} /> -->
            <div class="text-center p-8 bg-miami-dark/40 rounded-xl border border-white/10">
              <p class="text-gray-300">Miami Coverage Map - Temporarily disabled for SSR debugging</p>
            </div>
            <div class="mt-4 flex items-center justify-center gap-4 text-sm text-slate-400">
              <div class="flex items-center gap-2">
                <div class="w-3 h-3 rounded-full bg-miami-cyan"></div>
                <span>High Activity</span>
              </div>
              <div class="flex items-center gap-2">
                <div class="w-3 h-3 rounded-full bg-miami-purple"></div>
                <span>Growing</span>
              </div>
              <div class="flex items-center gap-2">
                <div class="w-3 h-3 rounded-full bg-miami-pink"></div>
                <span>Established</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Neighborhoods List */}
      <div class="order-1 lg:order-2 space-y-6">
        {regions.map((region) => (
          region.neighborhoods.length > 0 && (
            <div>
              <h3 class="text-xl font-display font-bold text-white mb-4 flex items-center gap-2">
                <MapPin size="24" className="text-miami-cyan" />
                {region.name}
              </h3>
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                {region.neighborhoods.map((neighborhood) => (
                  <a
                    href={`#${neighborhood.slug}`}
                    class="group flex items-center gap-3 p-4 rounded-lg bg-slate-800/30 backdrop-blur-sm border border-slate-700/50 hover:border-miami-cyan/50 hover:bg-slate-800/50 transition-all"
                  >
                    <div class="flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-miami-cyan/20 to-miami-purple/20 flex items-center justify-center group-hover:scale-110 transition-transform">
                      <MapPin size="24" className="text-miami-cyan" />
                    </div>
                    <div class="flex-1 min-w-0">
                      <p class="font-semibold text-white group-hover:text-miami-cyan transition-colors truncate">
                        {neighborhood.name}
                      </p>
                      {neighborhood.description && (
                        <p class="text-xs text-slate-400 truncate">
                          {neighborhood.description.split('.')[0]}
                        </p>
                      )}
                    </div>
                    <ArrowRight 
                      size="24"
                      className="flex-shrink-0 text-slate-600 group-hover:text-miami-cyan group-hover:translate-x-1 transition-all"
                    />
                  </a>
                ))}
              </div>
            </div>
          )
        ))}
      </div>
    </div>

    {/* Why Local Matters */}
    <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8">
      <div class="text-center p-6 rounded-xl bg-gradient-to-br from-miami-cyan/5 to-transparent border border-miami-cyan/20">
        <div class="w-16 h-16 rounded-full bg-miami-cyan/20 flex items-center justify-center mx-auto mb-4">
          <Users className="text-miami-cyan" />
        </div>
        <h3 class="text-lg font-display font-bold text-white mb-2">
          Local Market Knowledge
        </h3>
        <p class="text-slate-300 text-sm">
          Deep understanding of Miami demographics, search trends, and competitive landscape in every neighborhood
        </p>
      </div>

      <div class="text-center p-6 rounded-xl bg-gradient-to-br from-miami-purple/5 to-transparent border border-miami-purple/20">
        <div class="w-16 h-16 rounded-full bg-miami-purple/20 flex items-center justify-center mx-auto mb-4">
          <Globe className="text-miami-purple" />
        </div>
        <h3 class="text-lg font-display font-bold text-white mb-2">
          Bilingual SEO Expertise
        </h3>
        <p class="text-slate-300 text-sm">
          English and Spanish optimization to reach Miami's diverse, multilingual audience effectively
        </p>
      </div>

      <div class="text-center p-6 rounded-xl bg-gradient-to-br from-miami-pink/5 to-transparent border border-miami-pink/20">
        <div class="w-16 h-16 rounded-full bg-miami-pink/20 flex items-center justify-center mx-auto mb-4">
          <TrendingUp className="text-miami-pink" />
        </div>
        <h3 class="text-lg font-display font-bold text-white mb-2">
          Neighborhood-Specific Strategy
        </h3>
        <p class="text-slate-300 text-sm">
          Custom approaches for Brickell luxury businesses vs. Wynwood creative industries vs. Coral Gables services
        </p>
      </div>
    </div>

    {/* CTA */}
    <div class="mt-12 text-center">
      <p class="text-slate-400 mb-4">
        Don't see your neighborhood listed?
      </p>
      <a 
        href="#contact"
        class="inline-flex items-center gap-2 px-8 py-4 rounded-lg bg-gradient-to-r from-miami-cyan to-miami-purple text-white font-semibold hover:shadow-lg hover:shadow-miami-cyan/50 transition-all"
      >
        Contact Us About Your Area
        <ArrowRight size="36" />
      </a>
    </div>
  </Container>
</Section>
